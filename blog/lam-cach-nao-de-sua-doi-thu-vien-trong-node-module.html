<!doctype html>
<html lang="vi" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Làm cách nào để sửa đổi thư viện trong node module | Blog của Thắng</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tutiplaylab.io.vn/blog/lam-cach-nao-de-sua-doi-thu-vien-trong-node-module"><meta data-rh="true" property="og:locale" content="vi"><meta data-rh="true" name="docusaurus_locale" content="vi"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="vi"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" name="keywords" content="coding, blog, js, react, js blog, dev blog"><meta data-rh="true" name="google-adsense-account" content="ca-pub-7099570900840464"><meta data-rh="true" property="og:title" content="Làm cách nào để sửa đổi thư viện trong node module | Blog của Thắng"><meta data-rh="true" name="description" content="Một vài cách để fix lỗi trong node_module và lưu lại chỉnh sửa đó ( dùng patch-package, ... )"><meta data-rh="true" property="og:description" content="Một vài cách để fix lỗi trong node_module và lưu lại chỉnh sửa đó ( dùng patch-package, ... )"><meta data-rh="true" property="og:image" content="https://images.viblo.asia/35468773-2fcb-4363-8ac0-52a6a00f2f07.jpg"><meta data-rh="true" name="twitter:image" content="https://images.viblo.asia/35468773-2fcb-4363-8ac0-52a6a00f2f07.jpg"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-12-22T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/phamquyetthang"><meta data-rh="true" property="article:tag" content="javascript,nodejs"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tutiplaylab.io.vn/blog/lam-cach-nao-de-sua-doi-thu-vien-trong-node-module"><link data-rh="true" rel="alternate" href="https://tutiplaylab.io.vn/blog/lam-cach-nao-de-sua-doi-thu-vien-trong-node-module" hreflang="vi"><link data-rh="true" rel="alternate" href="https://tutiplaylab.io.vn/blog/lam-cach-nao-de-sua-doi-thu-vien-trong-node-module" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Blog của Thắng RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Blog của Thắng Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7Y4H6WLK3Z"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7Y4H6WLK3Z",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.6279f5ab.css">
<script src="/assets/js/runtime~main.5511b9e0.js" defer="defer"></script>
<script src="/assets/js/main.01f9ad18.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Nhảy tới nội dung"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Nhảy tới nội dung</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/codeduthu.jpg" alt="Code Đủ Thứ Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/codeduthu.jpg" alt="Code Đủ Thứ Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Code Đủ Thứ</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/donate">Buy me a coffee</a><a href="https://github.com/phamquyetthang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-label="Chuyển đổi chế độ sáng và tối (hiện tại chế độ sáng)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Điều hướng các bài viết gần đây trên blog"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/hello-world-trong-20-ngon-ngu-lap-trinh-pho-bien">Hello World trong 20 Ngôn Ngữ Lập Trình Phổ Biến</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/react-upload-anh-va-video-trong-rich-text-editor">React - Upload ảnh và video trong rich text editor</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/lam-cach-nao-de-sua-doi-thu-vien-trong-node-module">Làm cách nào để sửa đổi thư viện trong node module</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="Một vài cách để fix lỗi trong node_module và lưu lại chỉnh sửa đó ( dùng patch-package, ... )"><link itemprop="image" href="https://images.viblo.asia/35468773-2fcb-4363-8ac0-52a6a00f2f07.jpg"><header><h1 class="title_f1Hy" itemprop="headline">Làm cách nào để sửa đổi thư viện trong node module</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-12-22T00:00:00.000Z" itemprop="datePublished">22 tháng 12, 2023</time> · <!-- -->4 phút để đọc</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/phamquyetthang" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/43201625?v=4" alt="Phạm Quyết Thắng" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/phamquyetthang" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Phạm Quyết Thắng</span></a></div><small class="avatar__subtitle" itemprop="description">Fullstack developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><p>Một vài cách để fix lỗi trong node_module và lưu lại chỉnh sửa đó ( dùng patch-package, ... )</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-khi-cần-fix-thư-viện-từ-npm">1. Khi cần fix thư viện từ npm:<a href="#1-khi-cần-fix-thư-viện-từ-npm" class="hash-link" aria-label="Đường dẫn trực tiếp tới 1. Khi cần fix thư viện từ npm:" title="Đường dẫn trực tiếp tới 1. Khi cần fix thư viện từ npm:">​</a></h2>
<p>Đối với các anh em người chơi hệ js , thì chắc đều không lạ lẫm gì với việc cài đặt các thư viện của bên thứ ba qua câu lệnh
<code>npm install &lt;package name&gt;</code> ( hoặc yarn )</p>
<p>Các thư viện này sau khi được cài đặt sẽ nằm trong node module và tôi và các bạn chỉ việc lấy ra sử dụng.</p>
<p><img loading="lazy" src="/assets/images/35468773-2fcb-4363-8ac0-52a6a00f2f07-94562bf91bbf9f6c5a63587746110c78.jpg" width="486" height="330" class="img_ev3q"></p>
<p>Những gì có trong node_module chúng ta không cần thiết phải biết gồm những gì.</p>
<p>Node_module có khi còn là vùng cấm không ai muốn đụng vào.</p>
<p>Xóa node_module và cài lại cũng là 1 trong những giải pháp tâm linh chắc chắn bạn từng sử dụng để fix bug trong tuyệt vong.</p>
<p>Vấn đề phát sinh khi chúng ta phát hiện 1 issues của thư viện không như chúng ta mong muốn nhưng không muốn tìm thư viện khác để thay thế.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vậy-làm-cách-nào-để-tự-mình-sửa-thư-viện-và-không-bị-mất-đi-nếu-xóa-node_module">Vậy làm cách nào để tự mình sửa thư viện và không bị mất đi nếu xóa node_module<a href="#vậy-làm-cách-nào-để-tự-mình-sửa-thư-viện-và-không-bị-mất-đi-nếu-xóa-node_module" class="hash-link" aria-label="Đường dẫn trực tiếp tới Vậy làm cách nào để tự mình sửa thư viện và không bị mất đi nếu xóa node_module" title="Đường dẫn trực tiếp tới Vậy làm cách nào để tự mình sửa thư viện và không bị mất đi nếu xóa node_module">​</a></h3>
<p>Chúng ta có những cách sau đây:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2các-cách-sửa-thư-viện-trong-node_modules">2.Các cách sửa thư viện trong node_modules<a href="#2các-cách-sửa-thư-viện-trong-node_modules" class="hash-link" aria-label="Đường dẫn trực tiếp tới 2.Các cách sửa thư viện trong node_modules" title="Đường dẫn trực tiếp tới 2.Các cách sửa thư viện trong node_modules">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-1-fork-repo-của-package">Cách 1: Fork repo của package<a href="#cách-1-fork-repo-của-package" class="hash-link" aria-label="Đường dẫn trực tiếp tới Cách 1: Fork repo của package" title="Đường dẫn trực tiếp tới Cách 1: Fork repo của package">​</a></h3>
<p>Bạn có thể vào source code của package đó, fork về git của mình một bản , sửa đổi nó sau đó sửa.</p>
<p>Sau đó khai báo nó vào trong package.json:
Ví dụ như này
<img loading="lazy" alt="image.png" src="/assets/images/072ae723-f94b-4da3-9802-17bd928bfb57-6f9dbd8740f260951943790465efd645.png" width="921" height="110" class="img_ev3q"></p>
<p>Thay số phiên bản của package bằng đường dẫn đến repo của bạn theo dạng <code>git+{repo}</code></p>
<p>Đến đây bạn có thể sẽ gặp một số vấn đề nếu cố sửa đổi các package siêu to khổng lồ như mấy cái của facebook, có vài package lại là thư mục con của 1 package khác.</p>
<p>Bạn có thể vào trang <a href="https://gitpkg.vercel.app/" target="_blank" rel="noopener noreferrer">https://gitpkg.vercel.app/</a> , dán đường link trực tiếp đến thư mục chứa package đó . Trang web này sẽ render cho bạn 1 đường link và cả câu lệnh yarn ( npm ).</p>
<p>(Lý thuyết là thế, nhưng nó có chạy hay không thì, ..., để chắc kèo thì mọi người có thể chơi cách 2 )</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cách-2-sử-dụng-patch-package">Cách 2: Sử dụng patch-package<a href="#cách-2-sử-dụng-patch-package" class="hash-link" aria-label="Đường dẫn trực tiếp tới Cách 2: Sử dụng patch-package" title="Đường dẫn trực tiếp tới Cách 2: Sử dụng patch-package">​</a></h3>
<p>Cách này trực tiếp hơn cách thứ nhất,</p>
<p>Bạn cứ mạnh dạn tìm đến chỗ code trong node_module bạn định sửa và mạnh dạn sửa nó.</p>
<p>Sau đó chạy câu lệnh:</p>
<p><code> npx patch-package &lt;package name&gt;</code></p>
<p>patch-package sau đó sẽ tạo một thư mục patches, khai báo về các thay đổi của bạn.</p>
<p>Bạn có thể push folder này lên git và chạy lệnh <code>npx patch-package</code> để render lại những thay đổi của bạn.</p>
<p>Để đỡ mất một bước mỗi khi install lại project, bạn có thể thêm dòng <code>&quot;postinstall&quot;: &quot;npx patch-package&quot;</code> vào script như thế này để node_module tự render theo thay đổi của bạn mỗi khi install lại .</p>
<p><img loading="lazy" alt="image.png" src="/assets/images/ef048d12-b117-4597-8e6e-3de033978daa-69a4bf4f071055fbb4cc5767a106c30b.png" width="431" height="166" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-demo">3. Demo:<a href="#3-demo" class="hash-link" aria-label="Đường dẫn trực tiếp tới 3. Demo:" title="Đường dẫn trực tiếp tới 3. Demo:">​</a></h2>
<p>Mình có một demo nho nhỏ .</p>
<p>Đó là đổi cái cái logo mặc định của thằng metro trong REACT-NATIVE,
sau 1 hồi lục lọi mình phát hiện ra cái đống ấy viết ở một file tên TerminalReporter.js trong /node_modules/metro/src/lib</p>
<p>Tưởng là sẽ có mấy hàm thuật toán loằng ngoằng để in ra như hồi học C++ ở trường, nhưng không, nó chỉ là cái mảng chứ từng dòng dấu #### một :)))))
Thế thì dễ rồi, mình cứ thế mà đổi lại thôi.</p>
<p>Từ:</p>
<p><img loading="lazy" alt="image.png" src="/assets/images/6dffe6ba-b46f-43a1-a235-d30d12bf7cfa-8c69cefed3c002736512c6cfd98c4f2d.png" width="496" height="532" class="img_ev3q"></p>
<p>Thành:</p>
<p><img loading="lazy" alt="image.png" src="/assets/images/adef09a3-5890-477a-92af-7c5c4dbc7118-b3b116688e250d669456268feca9add1.png" width="654" height="636" class="img_ev3q"></p>
<p>( Mình làm trong những ngày deadline dí tận cổ, bận quá nên mình quyết định nằm nghịch hết 1 ngày cho đỡ khủng hoảng, nghịch xong stress hơn )</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Thẻ:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/javascript">javascript</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/nodejs">nodejs</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Thanh điều hướng của trang bài viết"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/react-upload-anh-va-video-trong-rich-text-editor"><div class="pagination-nav__sublabel">Bài mới hơn</div><div class="pagination-nav__label">React - Upload ảnh và video trong rich text editor</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-khi-cần-fix-thư-viện-từ-npm" class="table-of-contents__link toc-highlight">1. Khi cần fix thư viện từ npm:</a><ul><li><a href="#vậy-làm-cách-nào-để-tự-mình-sửa-thư-viện-và-không-bị-mất-đi-nếu-xóa-node_module" class="table-of-contents__link toc-highlight">Vậy làm cách nào để tự mình sửa thư viện và không bị mất đi nếu xóa node_module</a></li></ul></li><li><a href="#2các-cách-sửa-thư-viện-trong-node_modules" class="table-of-contents__link toc-highlight">2.Các cách sửa thư viện trong node_modules</a><ul><li><a href="#cách-1-fork-repo-của-package" class="table-of-contents__link toc-highlight">Cách 1: Fork repo của package</a></li><li><a href="#cách-2-sử-dụng-patch-package" class="table-of-contents__link toc-highlight">Cách 2: Sử dụng patch-package</a></li></ul></li><li><a href="#3-demo" class="table-of-contents__link toc-highlight">3. Demo:</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">My networks</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/channel/UCvh5_f6mJzVOthh42uojXbg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/phamquyetthang" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Buy me a coffee</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/donate">Donate</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Blog của Thắng - Code đủ thứ.</div></div></div></footer></div>
</body>
</html>